"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[72891],{15680:(e,t,r)=>{r.d(t,{xA:()=>d,yg:()=>y});var n=r(96540);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,l=function(e,t){if(null==e)return{};var r,n,l={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(l[r]=e[r]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}var s=n.createContext({}),p=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},g=n.forwardRef((function(e,t){var r=e.components,l=e.mdxType,a=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),c=p(r),g=l,y=c["".concat(s,".").concat(g)]||c[g]||u[g]||a;return r?n.createElement(y,o(o({ref:t},d),{},{components:r})):n.createElement(y,o({ref:t},d))}));function y(e,t){var r=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var a=r.length,o=new Array(a);o[0]=g;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[c]="string"==typeof e?e:l,o[1]=i;for(var p=2;p<a;p++)o[p]=r[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}g.displayName="MDXCreateElement"},75613:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>p});var n=r(58168),l=(r(96540),r(15680));const a={description:"This wiki demonstrates how to install M.2 coral to rpi5 and test coral.",title:"Install M.2 Coral to Raspberry Pi 5",keywords:["Edge","rpi5","M.2 coral"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/install_m2_coral_to_rpi5",last_update:{date:"07/19/2024",author:"Jiahao"},no_comments:!1},o="Install M.2 Coral to Raspberry Pi 5",i={unversionedId:"Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/Computer-Vision/install_m.2_coral_to_rpi5",id:"Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/Computer-Vision/install_m.2_coral_to_rpi5",title:"Install M.2 Coral to Raspberry Pi 5",description:"This wiki demonstrates how to install M.2 coral to rpi5 and test coral.",source:"@site/docs/Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/Computer-Vision/install_m.2_coral_to_rpi5.md",sourceDirName:"Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/Computer-Vision",slug:"/install_m2_coral_to_rpi5",permalink:"/install_m2_coral_to_rpi5",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/Computer-Vision/install_m.2_coral_to_rpi5.md",tags:[],version:"current",lastUpdatedBy:"Jiahao",lastUpdatedAt:1721347200,formattedLastUpdatedAt:"Jul 19, 2024",frontMatter:{description:"This wiki demonstrates how to install M.2 coral to rpi5 and test coral.",title:"Install M.2 Coral to Raspberry Pi 5",keywords:["Edge","rpi5","M.2 coral"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/install_m2_coral_to_rpi5",last_update:{date:"07/19/2024",author:"Jiahao"},no_comments:!1},sidebar:"ProductSidebar",previous:{title:"Benchmark on RPi5 and CM4 running yolov8s with rpi ai kit",permalink:"/benchmark_on_rpi5_and_cm4_running_yolov8s_with_rpi_ai_kit"},next:{title:"NVIDIA\xae Jetson\u2122 Powered Edge AI Devices Guide",permalink:"/NVIDIA_Jetson"}},s={},p=[{value:"Introduction",id:"introduction",level:2},{value:"Prepare Hardware",id:"prepare-hardware",level:2},{value:"Install Hardware",id:"install-hardware",level:2},{value:"Install Python3.8",id:"install-python38",level:2},{value:"Step 1: Update system",id:"step-1-update-system",level:3},{value:"Step 2: Install requirements",id:"step-2-install-requirements",level:3},{value:"Step 3: Download Python3.8",id:"step-3-download-python38",level:3},{value:"Step 4: Install Python3.8",id:"step-4-install-python38",level:3},{value:"Step 5: Check Python3.8",id:"step-5-check-python38",level:3},{value:"Step 6: Create a virtual environment with Python3.8",id:"step-6-create-a-virtual-environment-with-python38",level:3},{value:"Configure Hardware Settings",id:"configure-hardware-settings",level:2},{value:"Install the PCIe Driver and Edge TPU Runtime",id:"install-the-pcie-driver-and-edge-tpu-runtime",level:2},{value:"Step 1: Enter the virtual environment",id:"step-1-enter-the-virtual-environment",level:3},{value:"Step 2: Install Edge TPU Runtime",id:"step-2-install-edge-tpu-runtime",level:3},{value:"Step 3: Install the PCIe driver",id:"step-3-install-the-pcie-driver",level:3},{value:"Set Up the udev Rule Add a udev rule to manage device permissions:",id:"set-up-the-udev-rule-add-a-udev-rule-to-manage-device-permissions",level:2},{value:"Check Edge TPU",id:"check-edge-tpu",level:2},{value:"Install the PyCoral library and test the Edge TPU",id:"install-the-pycoral-library-and-test-the-edge-tpu",level:2},{value:"Step 1: Install the PyCoral library",id:"step-1-install-the-pycoral-library",level:3},{value:"Step 2: Test the Edge TPU",id:"step-2-test-the-edge-tpu",level:3},{value:"Result",id:"result",level:2},{value:"Tech Support &amp; Product Discussion",id:"tech-support--product-discussion",level:2}],d={toc:p},c="wrapper";function u(e){let{components:t,...r}=e;return(0,l.yg)(c,(0,n.A)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,l.yg)("h1",{id:"install-m2-coral-to-raspberry-pi-5"},"Install M.2 Coral to Raspberry Pi 5"),(0,l.yg)("h2",{id:"introduction"},"Introduction"),(0,l.yg)("p",null,"The ",(0,l.yg)("a",{parentName:"p",href:"https://www.seeedstudio.com/Coral-M2-Accelerator-with-Dual-Edge-TPU-p-4681.html"},"Coral M.2 Accelerator")," with Dual Edge TPU is an M.2 module that brings two Edge TPU coprocessors to existing systems and products with an available M.2 E-key slot."),(0,l.yg)("p",null,(0,l.yg)("a",{parentName:"p",href:"https://www.seeedstudio.com/Raspberry-Pi-5-8GB-p-5810.html"},"Raspberry Pi Fifth Flagship Development Computer")," is assembled with a powerful 2.4GHz 64-bit quad-core Arm processor and an 800MHz VideoCore VII GPU for impressive graphics. It offers advanced camera support, versatile connectivity, and enhanced peripherals, perfect for multimedia, gaming, and industrial tasks."),(0,l.yg)("p",null,"This wiki we will show you how to install Coral M.2 Accelerator to Raspberry Pi 5 and finally we will test Coral M.2 Accelerator."),(0,l.yg)("h2",{id:"prepare-hardware"},"Prepare Hardware"),(0,l.yg)("div",{class:"table-center"},(0,l.yg)("table",{align:"center"},(0,l.yg)("tr",null,(0,l.yg)("th",null,"Raspberry Pi 5 8GB"),(0,l.yg)("th",null,"Raspberry Pi M.2 HAT+"),(0,l.yg)("th",null,"Coral M.2 Accelerator B+M key")),(0,l.yg)("tr",null,(0,l.yg)("td",null,(0,l.yg)("div",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://media-cdn.seeedstudio.com/media/catalog/product/cache/bb49d3ec4ee05b6f018e93f896b8a25d/2/-/2-102110919-raspberry-pi-5-8gb-font.jpg",style:{width:600,height:"auto"}}))),(0,l.yg)("td",null,(0,l.yg)("div",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://media-cdn.seeedstudio.com/media/catalog/product/cache/bb49d3ec4ee05b6f018e93f896b8a25d/2/-/2-103990663-raspberry-pi-m.2-hat_-_for-raspberry-pi-5_-font.jpg",style:{width:600,height:"auto"}}))),(0,l.yg)("td",null,(0,l.yg)("div",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://media-cdn.seeedstudio.com/media/catalog/product/cache/bb49d3ec4ee05b6f018e93f896b8a25d/1/1/114992124-front.jpg",style:{width:600,height:"auto"}})))),(0,l.yg)("tr",null,(0,l.yg)("td",null,(0,l.yg)("div",{class:"get_one_now_container",style:{textAlign:"center"}},(0,l.yg)("a",{class:"get_one_now_item",href:"https://www.seeedstudio.com/Raspberry-Pi-5-8GB-p-5810.html"},(0,l.yg)("strong",null,(0,l.yg)("span",null,(0,l.yg)("font",{color:"FFFFFF",size:"4"}," Get One Now \ud83d\uddb1\ufe0f")))))),(0,l.yg)("td",null,(0,l.yg)("div",{class:"get_one_now_container",style:{textAlign:"center"}},(0,l.yg)("a",{class:"get_one_now_item",href:"https://www.seeedstudio.com/Raspberry-Pi-M-2-HAT-for-Raspberry-Pi-5-p-5881.html"},(0,l.yg)("strong",null,(0,l.yg)("span",null,(0,l.yg)("font",{color:"FFFFFF",size:"4"}," Get One Now \ud83d\uddb1\ufe0f")))))),(0,l.yg)("td",null,(0,l.yg)("div",{class:"get_one_now_container",style:{textAlign:"center"}},(0,l.yg)("a",{class:"get_one_now_item",href:"https://www.seeedstudio.com/Coral-M-2-Accelerator-B-M-key-p-4411.html"},(0,l.yg)("strong",null,(0,l.yg)("span",null,(0,l.yg)("font",{color:"FFFFFF",size:"4"}," Get One Now \ud83d\uddb1\ufe0f"))))))))),(0,l.yg)("h2",{id:"install-hardware"},"Install Hardware"),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/YOLOV8/pycoral_install.gif",alt:"pir",width:1e3,height:"auto"})),(0,l.yg)("h2",{id:"install-python38"},"Install Python3.8"),(0,l.yg)("p",null,"Coral software only support Python3.6-Python3.9, but the latest version of Raspberry Pi OS Python is Python3.11. So we need to install Python3.8."),(0,l.yg)("h3",{id:"step-1-update-system"},"Step 1: Update system"),(0,l.yg)("p",null,"Open a terminal and run the following commands to update the system:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"sudo apt update\nsudo apt full-upgrade\n")),(0,l.yg)("h3",{id:"step-2-install-requirements"},"Step 2: Install requirements"),(0,l.yg)("p",null,"Open a terminal and run the following commands to install the required packages:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"sudo apt-get install -y build-essential tk-dev libncurses5-dev libncursesw5-dev libreadline6-dev libdb5.3-dev libgdbm-dev libsqlite3-dev libssl-dev libbz2-dev libexpat1-dev liblzma-dev zlib1g-dev libffi-dev tar wget vim\n")),(0,l.yg)("h3",{id:"step-3-download-python38"},"Step 3: Download Python3.8"),(0,l.yg)("p",null,"Open a terminal and run the following commands to download Python3.8:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"wget https://www.python.org/ftp/python/3.8.0/Python-3.8.0.tgz\n")),(0,l.yg)("h3",{id:"step-4-install-python38"},"Step 4: Install Python3.8"),(0,l.yg)("p",null,"Open a terminal and run the following commands to install Python3.8:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"sudo tar zxf Python-3.8.0.tgz\ncd Python-3.8.0\nsudo ./configure --enable-optimizations\nsudo make -j 4\nsudo make altinstall\ncd ..\n")),(0,l.yg)("h3",{id:"step-5-check-python38"},"Step 5: Check Python3.8"),(0,l.yg)("p",null,"Open a terminal and run the following commands to check Python3.8:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"python3.8 -V\n")),(0,l.yg)("p",null,"The result should be:"),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/YOLOV8/Python3.8.png",alt:"pir",width:1e3,height:"auto"})),(0,l.yg)("h3",{id:"step-6-create-a-virtual-environment-with-python38"},"Step 6: Create a virtual environment with Python3.8"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"python3.8 -m venv coral_venv\n")),(0,l.yg)("h2",{id:"configure-hardware-settings"},"Configure Hardware Settings"),(0,l.yg)("p",null,"Open a terminal and run the following commands to open ",(0,l.yg)("inlineCode",{parentName:"p"},"config.txt"),":"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"sudo nano /boot/firmware/config.txt\n")),(0,l.yg)("p",null,"And then add the following text to ",(0,l.yg)("inlineCode",{parentName:"p"},"config.txt"),":"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"[all]\n# Enable the PCIe External connector.\ndtparam=pciex1\nkernel=kernel8.img\n# Enable Pineboards Hat Ai\ndtoverlay=pineboards-hat-ai\n")),(0,l.yg)("p",null,"Save and close the file by pressing CTRL+X, then Y to confirm. And then reboot the system."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"sudo reboot\n")),(0,l.yg)("p",null,"Check the kernel:"),(0,l.yg)("p",null,"Open a terminal and run the following commands to check the kernel:"),(0,l.yg)("admonition",{type:"note"},(0,l.yg)("p",{parentName:"admonition"},"Make sure your kernel version 6.6.30 or higher ")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"uname -a\n")),(0,l.yg)("h2",{id:"install-the-pcie-driver-and-edge-tpu-runtime"},"Install the PCIe Driver and Edge TPU Runtime"),(0,l.yg)("h3",{id:"step-1-enter-the-virtual-environment"},"Step 1: Enter the virtual environment"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"source coral_venv/bin/activate\n")),(0,l.yg)("h3",{id:"step-2-install-edge-tpu-runtime"},"Step 2: Install Edge TPU Runtime"),(0,l.yg)("p",null,"Add the Google Coral Edge TPU package repository"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},'echo "deb https://packages.cloud.google.com/apt coral-edgetpu-stable main" | sudo tee /etc/apt/sources.list.d/coral-edgetpu.list\n\ncurl https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -\n\nsudo apt-get update\n')),(0,l.yg)("p",null,"Install necessary packages and Edge TPU Runtime"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"sudo apt-get install cmake libedgetpu1-std devscripts debhelper dkms dh-dkms\n")),(0,l.yg)("h3",{id:"step-3-install-the-pcie-driver"},"Step 3: Install the PCIe driver"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"git clone https://github.com/google/gasket-driver.git\ncd gasket-driver\nsudo debuild -us -uc -tc -b\ncd ..\nsudo dpkg -i gasket-dkms_1.0-18_all.deb\n")),(0,l.yg)("h2",{id:"set-up-the-udev-rule-add-a-udev-rule-to-manage-device-permissions"},"Set Up the udev Rule Add a udev rule to manage device permissions:"),(0,l.yg)("p",null,"open a terminal and run the following commands to set up the udev rule:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},'sudo sh -c "echo \'SUBSYSTEM==\\"apex\\", MODE=\\"0660\\", GROUP=\\"apex\\"\' >> /etc/udev/rules.d/65-apex.rules"\n\nsudo groupadd apex\n\nsudo adduser $USER apex\n\nsudo reboot\n\n')),(0,l.yg)("h2",{id:"check-edge-tpu"},"Check Edge TPU"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"lspci -nn | grep 089a\n")),(0,l.yg)("p",null,"The result should be:"),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/YOLOV8/check_driver.png",alt:"pir",width:1e3,height:"auto"})),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"ls /dev/apex_0\n")),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/YOLOV8/check_TPU.png",alt:"pir",width:1e3,height:"auto"})),(0,l.yg)("h2",{id:"install-the-pycoral-library-and-test-the-edge-tpu"},"Install the PyCoral library and test the Edge TPU"),(0,l.yg)("h3",{id:"step-1-install-the-pycoral-library"},"Step 1: Install the PyCoral library"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"source coral_venv/bin/activate\npip install --upgrade pip\npython3 -m pip install --extra-index-url https://google-coral.github.io/py-repo/ pycoral~=2.0\n")),(0,l.yg)("h3",{id:"step-2-test-the-edge-tpu"},"Step 2: Test the Edge TPU"),(0,l.yg)("p",null,"Install resources for the example:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"mkdir coral && cd coral\ngit clone https://github.com/google-coral/pycoral.git\ncd pycoral\nbash examples/install_requirements.sh classify_image.py\n")),(0,l.yg)("p",null,"Test the Edge TPU:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"python3 examples/classify_image.py \\\n--model test_data/mobilenet_v2_1.0_224_inat_bird_quant_edgetpu.tflite \\\n--labels test_data/inat_bird_labels.txt \\\n--input test_data/parrot.jpg\n")),(0,l.yg)("p",null,"The result should be:"),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/YOLOV8/coral_result.png",alt:"pir",width:1e3,height:"auto"})),(0,l.yg)("h2",{id:"result"},"Result"),(0,l.yg)("p",null,"We have successfully installed the M.2 Coral accelerator on a Raspberry Pi 5 and tested the Edge TPU. We also ran the YOLOv8s model on the Coral M.2 Accelerator with int8 quantization, using an input size of 640x640 and a batch size of 1. The inference time is approximately 800-1000ms, which translates to around 1.1 frames per second (FPS)."),(0,l.yg)("iframe",{width:"800",height:"400",src:"https://www.youtube.com/embed/4c8UX06d9Tg",title:"Raspberry Pi AI: YOLOv8s Object Detection with Int8 Format Using M.2 Coral Accelerator on RPi 5",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:!0}),(0,l.yg)("h2",{id:"tech-support--product-discussion"},"Tech Support & Product Discussion"),(0,l.yg)("p",null,"Thank you for choosing our products! We are here to provide you with different support to ensure that your experience with our products is as smooth as possible. We offer several communication channels to cater to different preferences and needs."),(0,l.yg)("div",{class:"button_tech_support_container"},(0,l.yg)("a",{href:"https://forum.seeedstudio.com/",class:"button_forum"}),(0,l.yg)("a",{href:"https://www.seeedstudio.com/contacts",class:"button_email"})),(0,l.yg)("div",{class:"button_tech_support_container"},(0,l.yg)("a",{href:"https://discord.gg/eWkprNDMU7",class:"button_discord"}),(0,l.yg)("a",{href:"https://github.com/Seeed-Studio/wiki-documents/discussions/69",class:"button_discussion"})))}u.isMDXComponent=!0}}]);