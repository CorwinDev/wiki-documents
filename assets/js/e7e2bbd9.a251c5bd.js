"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[76027],{15680:(e,t,n)=>{n.d(t,{xA:()=>d,yg:()=>c});var r=n(96540);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},d=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},p="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=u(n),m=o,c=p["".concat(l,".").concat(m)]||p[m]||g[m]||i;return n?r.createElement(c,a(a({ref:t},d),{},{components:n})):r.createElement(c,a({ref:t},d))}));function c(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:o,a[1]=s;for(var u=2;u<i;u++)a[u]=n[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},91229:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>g,frontMatter:()=>i,metadata:()=>s,toc:()=>u});var r=n(58168),o=(n(96540),n(15680));const i={description:"Learn how to set up and configure Modbus TCP and Modbus RTU with Home Assistant on a reComputer R1000, a powerful Raspberry Pi-powered solution for seamless integration and control of your Modbus devices in a Building Management System (BMS).",title:"reComputer R1000 and Modbus with Home Assistant",keywords:["Home Assistant","reComputer R1000","Home Automation","BMS","Modbus"],image:"https://files.seeedstudio.com/wiki/reComputer-R1000/recomputer_r_images/01.png",slug:"/recomputer_r1000_home_assistant_modbus",last_update:{date:"08/07/2024",author:"Kasun Thushara"}},a=void 0,s={unversionedId:"Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/Home-Assistant/recomputer-r1000-modbus-home-assistant",id:"Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/Home-Assistant/recomputer-r1000-modbus-home-assistant",title:"reComputer R1000 and Modbus with Home Assistant",description:"Learn how to set up and configure Modbus TCP and Modbus RTU with Home Assistant on a reComputer R1000, a powerful Raspberry Pi-powered solution for seamless integration and control of your Modbus devices in a Building Management System (BMS).",source:"@site/docs/Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/Home-Assistant/recomputer-r1000-modbus-home-assistant.md",sourceDirName:"Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/Home-Assistant",slug:"/recomputer_r1000_home_assistant_modbus",permalink:"/recomputer_r1000_home_assistant_modbus",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/Home-Assistant/recomputer-r1000-modbus-home-assistant.md",tags:[],version:"current",lastUpdatedBy:"Kasun Thushara",lastUpdatedAt:1722988800,formattedLastUpdatedAt:"Aug 7, 2024",frontMatter:{description:"Learn how to set up and configure Modbus TCP and Modbus RTU with Home Assistant on a reComputer R1000, a powerful Raspberry Pi-powered solution for seamless integration and control of your Modbus devices in a Building Management System (BMS).",title:"reComputer R1000 and Modbus with Home Assistant",keywords:["Home Assistant","reComputer R1000","Home Automation","BMS","Modbus"],image:"https://files.seeedstudio.com/wiki/reComputer-R1000/recomputer_r_images/01.png",slug:"/recomputer_r1000_home_assistant_modbus",last_update:{date:"08/07/2024",author:"Kasun Thushara"}},sidebar:"ProductSidebar",previous:{title:"reComputer R1000 with Home Assistant",permalink:"/recomputer_r1000_home_automation"},next:{title:"AWS IoT Core Intergate With reComputer R1000",permalink:"/recomputer_r1000_aws"}},l={},u=[{value:"Introduction",id:"introduction",level:2},{value:"Getting Start",id:"getting-start",level:2},{value:"Hardware Preparation",id:"hardware-preparation",level:3},{value:"Software Preperation",id:"software-preperation",level:3},{value:"File Editor Add-on",id:"file-editor-add-on",level:2},{value:"Enabling Modbus TCP Integration",id:"enabling-modbus-tcp-integration",level:2},{value:"Enabling Modbus RTU Integration",id:"enabling-modbus-rtu-integration",level:2},{value:"Tech Support &amp; Product Discussion",id:"tech-support--product-discussion",level:2}],d={toc:u},p="wrapper";function g(e){let{components:t,...n}=e;return(0,o.yg)(p,(0,r.A)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.yg)("h2",{id:"introduction"},"Introduction"),(0,o.yg)("p",null,"In modern building management systems (BMS), integrating various protocols and devices is crucial for efficient monitoring and control. This guide focuses on leveraging the capabilities of Modbus communication protocols (Modbus TCP and Modbus RTU) with Home Assistant OS, using the powerful reComputer R1000, a Raspberry Pi-powered solution. Whether you're setting up a new system or enhancing an existing one, this guide will walk you through the process of connecting your Modbus devices to Home Assistant, ensuring seamless integration and control."),(0,o.yg)("h2",{id:"getting-start"},"Getting Start"),(0,o.yg)("p",null,"Before you start this project, you may need to prepare your hardware in advance as described here."),(0,o.yg)("h3",{id:"hardware-preparation"},"Hardware Preparation"),(0,o.yg)("div",{class:"table-center"},(0,o.yg)("table",{class:"table-nobg"},(0,o.yg)("tr",{class:"table-trnobg"},(0,o.yg)("th",{class:"table-trnobg"},"reComputer R1000")),(0,o.yg)("tr",{class:"table-trnobg"}),(0,o.yg)("tr",{class:"table-trnobg"},(0,o.yg)("td",{class:"table-trnobg"},(0,o.yg)("div",{style:{textAlign:"center"}},(0,o.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/recomputer_r_images/01.png",style:{width:300,height:"auto"}})))),(0,o.yg)("tr",{class:"table-trnobg"}),(0,o.yg)("tr",{class:"table-trnobg"},(0,o.yg)("td",{class:"table-trnobg"},(0,o.yg)("div",{class:"get_one_now_container",style:{textAlign:"center"}},(0,o.yg)("a",{class:"get_one_now_item",href:"https://www.seeedstudio.com/reComputer-R1025-10-p-5895.html"},(0,o.yg)("strong",null,(0,o.yg)("span",null,(0,o.yg)("font",{color:"FFFFFF",size:"4"}," Get One Now \ud83d\uddb1\ufe0f"))))))))),(0,o.yg)("h3",{id:"software-preperation"},"Software Preperation"),(0,o.yg)("p",null,"Before diving into the integration process, it's crucial to ensure that all necessary drivers and tools are installed. Proper ",(0,o.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/reComputer_r1000_use_rs485_modbus_rtu/"},"installation of drivers")," is a prerequisite for seamless communication between Modbus RTU devices and Home Assistant. It is highly recommended to thoroughly study and install the required drivers before proceeding with this guide."),(0,o.yg)("p",null,"Additionally, if you haven't installed Home Assistant yet, please follow the ",(0,o.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/recomputer_r1000_home_automation/"},"Home Assistant installation guide")," to set it up on your reComputer R1000."),(0,o.yg)("h2",{id:"file-editor-add-on"},"File Editor Add-on"),(0,o.yg)("p",null,"While you can configure most of Home Assistant directly from the user interface under Settings, some parts require you to edit files such as configuration.yaml. This file contains integrations to be loaded along with their configurations. By adding code snippets to this configuration file, you can enable specific functionalities, including Modbus integration."),(0,o.yg)("p",null,"To get started, you need to install the File Editor add-on in Home Assistant:"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"Open Home Assistant."),(0,o.yg)("li",{parentName:"ul"},"Navigate to ",(0,o.yg)("inlineCode",{parentName:"li"},"Settings > Add-ons"),".")),(0,o.yg)("div",{style:{textAlign:"center"}},(0,o.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/HA/settings.PNG",style:{width:600}})),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"Click on the ",(0,o.yg)("inlineCode",{parentName:"li"},"Add-on Store"),".")),(0,o.yg)("div",{style:{textAlign:"center"}},(0,o.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/HA/add-ons.PNG",style:{width:600}})),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"Search for ",(0,o.yg)("inlineCode",{parentName:"li"},"File Editor")," and click on it.")),(0,o.yg)("div",{style:{textAlign:"center"}},(0,o.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/HA/fileeditor.PNG",style:{width:600}})),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"Click the Install button."),(0,o.yg)("li",{parentName:"ul"},"Once installed, click on Start to launch the File Editor."),(0,o.yg)("li",{parentName:"ul"},"Optionally, enable Show in Sidebar for quick access.")),(0,o.yg)("div",{style:{textAlign:"center"}},(0,o.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/HA/fileeditor-start.PNG",style:{width:600}})),(0,o.yg)("p",null,"With the File Editor add-on, you can now edit the ",(0,o.yg)("inlineCode",{parentName:"p"},"configuration.yaml")," file to add Modbus integration"),(0,o.yg)("div",{style:{textAlign:"center"}},(0,o.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/HA/config.PNG",style:{width:600}})),(0,o.yg)("h2",{id:"enabling-modbus-tcp-integration"},"Enabling Modbus TCP Integration"),(0,o.yg)("p",null,"To enable the Modbus integration in Home Assistant, you need to add specific parameters to your configuration.yaml file. Below are the parameters and their descriptions that you will need to configure:"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"name"),": The name of this hub. Must be unique."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"host"),": The IP address or name of your Modbus device, e.g., ",(0,o.yg)("inlineCode",{parentName:"li"},"192.168.1.1"),"."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"port"),": The network port for communication."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"type"),": The type of Modbus connection. Options are tcp or serial.Here we used ",(0,o.yg)("inlineCode",{parentName:"li"},"tcp"))),(0,o.yg)("p",null,"To configure entities for your Modbus integration, you need to define various parameters for each entity. Below are the parameters required for setting up binary sensors:\nThere are several entities. You can check on ",(0,o.yg)("a",{parentName:"p",href:"https://www.home-assistant.io/integrations/modbus"},"Offical modbus Home Assistant page"),"."),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"binary_sensors"),": A list of all binary sensors configured for this connection."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"address"),": The address of the coil/register."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"name"),": The name of the entity, which must be unique within the entity type."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"scan_interval"),": The update interval in seconds. Set scan_interval = 0 for no polling. Entities are read shortly after startup and then according to scan_interval."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"slave"),": Identical to device_address."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"input_type"),": The type of request. Options are coil, holding, or input.")),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Example")," :"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"modbus:\n  - name: modbus_hub\n    type: tcp\n    host: IP_ADDRESS_of_PLC\n    port: 502\n    binary_sensors:\n      - name: Relay_1\n        address: 8193\n        slave: 1\n        input_type: coil\n        scan_interval: 1\n      - name: Relay_2\n        address: 8194\n        slave: 1\n        input_type: coil\n        scan_interval: 1\n")),(0,o.yg)("div",{style:{textAlign:"center"}},(0,o.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/HA/modbus-settings.PNG",style:{width:600}})),(0,o.yg)("admonition",{type:"note"},(0,o.yg)("p",{parentName:"admonition"},"It is neccesary save and restart HA after changing configuration.yml file ")),(0,o.yg)("h2",{id:"enabling-modbus-rtu-integration"},"Enabling Modbus RTU Integration"),(0,o.yg)("p",null,"To enable Modbus RTU integration in Home Assistant, you need to add the following parameters to your configuration.yaml file:"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"name"),": The name of this hub. Must be unique."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"type"),": The type of Modbus connection. Here, it should be serial."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"port"),": The serial port or USB device where your Modbus device is connected to your Home Assistant host. We found that it is ",(0,o.yg)("inlineCode",{parentName:"li"},"/dev/ttyAMA30")),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"baudrate"),": The speed of the serial connection."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"method"),": The method of connection to Modbus. Options are rtu and ascii."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"parity"),": The parity of the data bytes. Options are E (Even), O (Odd), N (None)."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"bytesize"),": The data size in bits of each byte. Typically 8."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"stopbits"),": The stop bits of the data bytes.")),(0,o.yg)("p",null,"To configure entities for your Modbus RTU integration, you need to define various parameters for each sensor. Below are the parameters required for setting up sensors:"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"sensors"),": The Modbus sensor allows you to gather data from Modbus registers."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"name"),": The name of the entity, which must be unique within the entity type."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"address"),": The address of the register."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"slave"),": Identical to device_address."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"input_type"),": The Modbus register type for the sensor. Options are holding or input."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"scale"),": The scale factor."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"device_class"),": The type/class of the sensor to set the icon in the frontend."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"unit_of_measurement"),": The unit to attach to the value.")),(0,o.yg)("p",null,"Example: "),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"modbus:\n  - name: modbus_hub2\n    type: serial\n    port: /dev/ttyAMA30\n    baudrate: 9600\n    bytesize: 8\n    method: rtu\n    parity: N\n    stopbits: 1\n    sensors:\n      - name: Room Temperature\n        address: 1\n        input_type: input\n        slave: 1\n        scale: 0.01\n        device_class: temperature\n        unit_of_measurement: \xb0C\n      - name: Room Humidity\n        address: 2\n        input_type: input\n        slave: 1\n        scale: 0.01\n        unit_of_measurement: '%'\n        device_class: humidity\n")),(0,o.yg)("div",{style:{textAlign:"center"}},(0,o.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/HA/modbus-rtu-setting.PNG",style:{width:600}})),(0,o.yg)("admonition",{type:"note"},(0,o.yg)("p",{parentName:"admonition"},"It is neccesary save and restart HA after changing configuration.yml file ")),(0,o.yg)("p",null,"Finally you will be able to see the working phenomina."),(0,o.yg)("div",{style:{textAlign:"center"}},(0,o.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/HA/demo.gif",style:{width:600}})),(0,o.yg)("h2",{id:"tech-support--product-discussion"},"Tech Support & Product Discussion"),(0,o.yg)("p",null,"Thank you for choosing our products! We are here to provide you with different support to ensure that your experience with our products is as smooth as possible. We offer several communication channels to cater to different preferences and needs."),(0,o.yg)("div",{class:"button_tech_support_container"},(0,o.yg)("a",{href:"https://forum.seeedstudio.com/",class:"button_forum"}),(0,o.yg)("a",{href:"https://www.seeedstudio.com/contacts",class:"button_email"})),(0,o.yg)("div",{class:"button_tech_support_container"},(0,o.yg)("a",{href:"https://discord.gg/eWkprNDMU7",class:"button_discord"}),(0,o.yg)("a",{href:"https://github.com/Seeed-Studio/wiki-documents/discussions/69",class:"button_discussion"})))}g.isMDXComponent=!0}}]);