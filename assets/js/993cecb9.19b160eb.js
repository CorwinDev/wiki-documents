"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[11072],{15680:(e,t,n)=>{n.d(t,{xA:()=>c,yg:()=>h});var i=n(96540);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=i.createContext({}),p=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return i.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},g=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(n),g=a,h=u["".concat(s,".").concat(g)]||u[g]||d[g]||r;return n?i.createElement(h,o(o({ref:t},c),{},{components:n})):i.createElement(h,o({ref:t},c))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=g;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:a,o[1]=l;for(var p=2;p<r;p++)o[p]=n[p];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}g.displayName="MDXCreateElement"},81585:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var i=n(9668),a=(n(96540),n(15680));const r={description:"Bluetooth Usage on Seeed Studio XIAO ESP32C3",title:"Bluetooth Usage",keywords:["xiao"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/XIAO_ESP32C3_Bluetooth_Usage",last_update:{date:"1/11/2023",author:"shuxu hu"}},o="Bluetooth Usage",l={unversionedId:"Sensor/SeeedStudio_XIAO/SeeedStudio_XIAO_ESP32C3/XIAO_ESP32C3_Bluetooth_Usage",id:"Sensor/SeeedStudio_XIAO/SeeedStudio_XIAO_ESP32C3/XIAO_ESP32C3_Bluetooth_Usage",title:"Bluetooth Usage",description:"Bluetooth Usage on Seeed Studio XIAO ESP32C3",source:"@site/docs/Sensor/SeeedStudio_XIAO/SeeedStudio_XIAO_ESP32C3/XIAO_ESP32C3_Bluetooth_Usage.md",sourceDirName:"Sensor/SeeedStudio_XIAO/SeeedStudio_XIAO_ESP32C3",slug:"/XIAO_ESP32C3_Bluetooth_Usage",permalink:"/XIAO_ESP32C3_Bluetooth_Usage",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Sensor/SeeedStudio_XIAO/SeeedStudio_XIAO_ESP32C3/XIAO_ESP32C3_Bluetooth_Usage.md",tags:[],version:"current",lastUpdatedBy:"shuxu hu",lastUpdatedAt:1673395200,formattedLastUpdatedAt:"Jan 11, 2023",frontMatter:{description:"Bluetooth Usage on Seeed Studio XIAO ESP32C3",title:"Bluetooth Usage",keywords:["xiao"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/XIAO_ESP32C3_Bluetooth_Usage",last_update:{date:"1/11/2023",author:"shuxu hu"}},sidebar:"ProductSidebar",previous:{title:"WiFi Usage",permalink:"/XIAO_ESP32C3_WiFi_Usage"},next:{title:"XIAO ESP32C3 with Zephyr(RTOS)",permalink:"/XIAO-ESP32C3-Zephyr"}},s={},p=[{value:"Hardware set up",id:"hardware-set-up",level:2},{value:"Scan Bluetooth devices",id:"scan-bluetooth-devices",level:2},{value:"XIAO ESP32C3 as Bluetooth server",id:"xiao-esp32c3-as-bluetooth-server",level:2},{value:"Tech Support &amp; Product Discussion",id:"tech-support--product-discussion",level:2}],c={toc:p},u="wrapper";function d(e){let{components:t,...n}=e;return(0,a.yg)(u,(0,i.A)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"bluetooth-usage"},"Bluetooth Usage"),(0,a.yg)("p",null,"Seeed Studio XIAO ESP32C3 supports Bluetooth 5 (LE) connectivity. This wiki will introduce the basics of Bluetooth usage on this board."),(0,a.yg)("h2",{id:"hardware-set-up"},"Hardware set up"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Step 1.")," Connect the included ",(0,a.yg)("strong",{parentName:"li"},"WiFi/ Bluetooth antenna")," to the ",(0,a.yg)("strong",{parentName:"li"},"IPEX connector")," on the board")),(0,a.yg)("div",{align:"center"},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/XIAO_WiFi/wifi-6.png",alt:"pir",width:130,height:"auto"})),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Step 2.")," Connect XIAO ESP32C3 to your computer via a USB Type-C cable")),(0,a.yg)("div",{align:"center"},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/XIAO_WiFi/cable-connect.png",alt:"pir",width:120,height:"auto"})),(0,a.yg)("h2",{id:"scan-bluetooth-devices"},"Scan Bluetooth devices"),(0,a.yg)("p",null,"In this example, we are going to use XIAO ESP32C3 to scan available Bluetooth devices around it."),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Step 1.")," Copy and paste the code below into Arduino IDE")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-cpp"},'#include <BLEDevice.h>\n#include <BLEUtils.h>\n#include <BLEScan.h>\n#include <BLEAdvertisedDevice.h>\n\nint scanTime = 5; //In seconds\nBLEScan* pBLEScan;\n\nclass MyAdvertisedDeviceCallbacks: public BLEAdvertisedDeviceCallbacks {\n    void onResult(BLEAdvertisedDevice advertisedDevice) {\n      Serial.printf("Advertised Device: %s \\n", advertisedDevice.toString().c_str());\n    }\n};\n\nvoid setup() {\n  Serial.begin(115200);\n  Serial.println("Scanning...");\n\n  BLEDevice::init("");\n  pBLEScan = BLEDevice::getScan(); //create new scan\n  pBLEScan->setAdvertisedDeviceCallbacks(new MyAdvertisedDeviceCallbacks());\n  pBLEScan->setActiveScan(true); //active scan uses more power, but get results faster\n  pBLEScan->setInterval(100);\n  pBLEScan->setWindow(99);  // less or equal setInterval value\n}\n\nvoid loop() {\n  // put your main code here, to run repeatedly:\n  BLEScanResults foundDevices = pBLEScan->start(scanTime, false);\n  Serial.print("Devices found: ");\n  Serial.println(foundDevices.getCount());\n  Serial.println("Scan done!");\n  pBLEScan->clearResults();   // delete results fromBLEScan buffer to release memory\n  delay(2000);\n}\n')),(0,a.yg)("admonition",{type:"tip"},(0,a.yg)("p",{parentName:"admonition"},"If you have already upgrade your ESP32 development board to version 3.0.0 above, you need to change some code to compatible with it."),(0,a.yg)("ol",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("inlineCode",{parentName:"li"},"BLEScanResults foundDevices = pBLEScan->start(scanTime, false);")," change to ",(0,a.yg)("inlineCode",{parentName:"li"},"BLEScanResults* foundDevices = pBLEScan->start(scanTime, false);")),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("inlineCode",{parentName:"li"},"Serial.println(foundDevices.getCount());")," change to ",(0,a.yg)("inlineCode",{parentName:"li"},"Serial.println(foundDevices->getCount());")))),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Step 2.")," Upload the codes and open the Serial Monitor to start scanning for Bluetooth devices"),(0,a.yg)("div",{align:"center"},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/XIAO_WiFi/ble-1.jpg",alt:"pir",width:1e3,height:"auto"})),(0,a.yg)("h2",{id:"xiao-esp32c3-as-bluetooth-server"},"XIAO ESP32C3 as Bluetooth server"),(0,a.yg)("p",null,"In this example, we are going to use XIAO ESP32C3 as a Bluetooth server. Here we will search for XIAO ESP32C3 board using a smartphone and send out strings to display on the serial monitor"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Step 1.")," Copy and paste the code below into Arduino IDE")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-cpp"},'#include <BLEDevice.h>\n#include <BLEUtils.h>\n#include <BLEServer.h>\n\n// See the following for generating UUIDs:\n// https://www.uuidgenerator.net/\n\n#define SERVICE_UUID        "4fafc201-1fb5-459e-8fcc-c5c9c331914b"\n#define CHARACTERISTIC_UUID "beb5483e-36e1-4688-b7f5-ea07361b26a8"\n\n\nclass MyCallbacks: public BLECharacteristicCallbacks {\n    void onWrite(BLECharacteristic *pCharacteristic) {\n      std::string value = pCharacteristic->getValue();\n\n      if (value.length() > 0) {\n        Serial.println("*********");\n        Serial.print("New value: ");\n        for (int i = 0; i < value.length(); i++)\n          Serial.print(value[i]);\n\n        Serial.println();\n        Serial.println("*********");\n      }\n    }\n};\n\nvoid setup() {\n  Serial.begin(115200);\n\n  BLEDevice::init("MyESP32");\n  BLEServer *pServer = BLEDevice::createServer();\n\n  BLEService *pService = pServer->createService(SERVICE_UUID);\n\n  BLECharacteristic *pCharacteristic = pService->createCharacteristic(\n                                         CHARACTERISTIC_UUID,\n                                         BLECharacteristic::PROPERTY_READ |\n                                         BLECharacteristic::PROPERTY_WRITE\n                                       );\n\n  pCharacteristic->setCallbacks(new MyCallbacks());\n\n  pCharacteristic->setValue("Hello World");\n  pService->start();\n\n  BLEAdvertising *pAdvertising = pServer->getAdvertising();\n  pAdvertising->start();\n}\n\nvoid loop() {\n  // put your main code here, to run repeatedly:\n  delay(2000);\n}\n')),(0,a.yg)("admonition",{type:"tip"},(0,a.yg)("p",{parentName:"admonition"},"If you have already upgrade your ESP32 development board to version 3.0.0 above, you need to change some code to compatible with it."),(0,a.yg)("ol",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("inlineCode",{parentName:"li"},"std::string value = pCharacteristic->getValue();")," change to ",(0,a.yg)("inlineCode",{parentName:"li"},"String value = pCharacteristic->getValue();")))),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"Step 2.")," Upload the codes and open the Serial Monitor")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"Step 3.")," Download and install LightBlue App on your smartphone"))),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://play.google.com/store/apps/details?id=com.punchthrough.lightblueexplorer&hl=en_US&gl=US"},"LightBlue App (Android)")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://apps.apple.com/us/app/lightblue/id557428110"},"LightBlue App (Apple)"))),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Step 4.")," Open Bluetooth on your phone, bring the phone close to XIAO ESP32C3, scan for devices and connect with ",(0,a.yg)("strong",{parentName:"li"},"MyESP32")," device")),(0,a.yg)("div",{align:"center"},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/XIAO_WiFi/ble-2.jpg",alt:"pir",width:300,height:"auto"})),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Step 5.")," Open the LightBlue app and click ",(0,a.yg)("strong",{parentName:"li"},"Bonded")," tab")),(0,a.yg)("div",{align:"center"},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/XIAO_WiFi/ble-3.jpg",alt:"pir",width:350,height:"auto"})),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Step 6.")," Click ",(0,a.yg)("strong",{parentName:"li"},"CONNECT")," next to ",(0,a.yg)("strong",{parentName:"li"},"MyESP32"))),(0,a.yg)("div",{align:"center"},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/XIAO_WiFi/ble-4.jpg",alt:"pir",width:350,height:"auto"})),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Step 7.")," Click the section at the very bottom which says ",(0,a.yg)("strong",{parentName:"li"},"Readable, Writable"))),(0,a.yg)("div",{align:"center"},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/XIAO_WiFi/ble-5.jpg",alt:"pir",width:300,height:"auto"})),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Step 8.")," Under ",(0,a.yg)("strong",{parentName:"li"},"Data format")," drop-down menu, select ",(0,a.yg)("strong",{parentName:"li"},"UTF-8 String"))),(0,a.yg)("div",{align:"center"},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/XIAO_WiFi/ble-6.jpg",alt:"pir",width:300,height:"auto"})),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Step 9."),' Type "Hello" under ',(0,a.yg)("strong",{parentName:"li"},"WRITTEN VALUES")," and click ",(0,a.yg)("strong",{parentName:"li"},"WRITE"),(0,a.yg)("div",{align:"center"},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/XIAO_WiFi/ble-7.jpg",alt:"pir",width:300,height:"auto"})))),(0,a.yg)("p",null,'You will see the text string "Hello" output on the serial monitor of Arduino IDE'),(0,a.yg)("div",{align:"center"},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/XIAO_WiFi/ble-9.jpg",alt:"pir",width:500,height:"auto"})),(0,a.yg)("h2",{id:"tech-support--product-discussion"},"Tech Support & Product Discussion"),(0,a.yg)("p",null,"Thank you for choosing our products! We are here to provide you with different support to ensure that your experience with our products is as smooth as possible. We offer several communication channels to cater to different preferences and needs."),(0,a.yg)("div",{class:"button_tech_support_container"},(0,a.yg)("a",{href:"https://forum.seeedstudio.com/",class:"button_forum"}),(0,a.yg)("a",{href:"https://www.seeedstudio.com/contacts",class:"button_email"})),(0,a.yg)("div",{class:"button_tech_support_container"},(0,a.yg)("a",{href:"https://discord.gg/eWkprNDMU7",class:"button_discord"}),(0,a.yg)("a",{href:"https://github.com/Seeed-Studio/wiki-documents/discussions/69",class:"button_discussion"})))}d.isMDXComponent=!0}}]);