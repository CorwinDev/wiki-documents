"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[60214],{15680:(e,t,n)=>{n.d(t,{xA:()=>g,yg:()=>m});var r=n(96540);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var d=r.createContext({}),l=function(e){var t=r.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},g=function(e){var t=l(e.components);return r.createElement(d.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,d=e.parentName,g=a(e,["components","mdxType","originalType","parentName"]),u=l(n),c=o,m=u["".concat(d,".").concat(c)]||u[c]||p[c]||i;return n?r.createElement(m,s(s({ref:t},g),{},{components:n})):r.createElement(m,s({ref:t},g))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,s=new Array(i);s[0]=c;var a={};for(var d in t)hasOwnProperty.call(t,d)&&(a[d]=t[d]);a.originalType=e,a[u]="string"==typeof e?e:o,s[1]=a;for(var l=2;l<i;l++)s[l]=n[l];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},42221:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>a,toc:()=>l});var r=n(58168),o=(n(96540),n(15680));const i={description:"Learn how to integrate Modbus TCP with Node-RED on the reTerminal DM. This guide covers setting up the hardware, configuring Modbus devices, and creating Node-RED flows for efficient industrial automation and monitoring.",title:"reTerminal DM with Node Red and Modbus TCP",keywords:["HMI","reTerminal DM","Node-Red","Modbus","Raspberry"],image:"https://files.seeedstudio.com/wiki/reTerminalDM/nodered/modbus-reterminal.png",slug:"/reterminal_dm_node_red_modbus_tcp",last_update:{date:"05/27/2024",author:"Kasun Thushara"}},s=void 0,a={unversionedId:"Edge/Raspberry_Pi_Devices/reTerminal-DM/Node-Red/reTerminal-DM-Node-Red-Modbus-TCP",id:"Edge/Raspberry_Pi_Devices/reTerminal-DM/Node-Red/reTerminal-DM-Node-Red-Modbus-TCP",title:"reTerminal DM with Node Red and Modbus TCP",description:"Learn how to integrate Modbus TCP with Node-RED on the reTerminal DM. This guide covers setting up the hardware, configuring Modbus devices, and creating Node-RED flows for efficient industrial automation and monitoring.",source:"@site/docs/Edge/Raspberry_Pi_Devices/reTerminal-DM/Node-Red/reTerminal-DM-Node-Red-Modbus-TCP.md",sourceDirName:"Edge/Raspberry_Pi_Devices/reTerminal-DM/Node-Red",slug:"/reterminal_dm_node_red_modbus_tcp",permalink:"/reterminal_dm_node_red_modbus_tcp",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Edge/Raspberry_Pi_Devices/reTerminal-DM/Node-Red/reTerminal-DM-Node-Red-Modbus-TCP.md",tags:[],version:"current",lastUpdatedBy:"Kasun Thushara",lastUpdatedAt:1716768e3,formattedLastUpdatedAt:"May 27, 2024",frontMatter:{description:"Learn how to integrate Modbus TCP with Node-RED on the reTerminal DM. This guide covers setting up the hardware, configuring Modbus devices, and creating Node-RED flows for efficient industrial automation and monitoring.",title:"reTerminal DM with Node Red and Modbus TCP",keywords:["HMI","reTerminal DM","Node-Red","Modbus","Raspberry"],image:"https://files.seeedstudio.com/wiki/reTerminalDM/nodered/modbus-reterminal.png",slug:"/reterminal_dm_node_red_modbus_tcp",last_update:{date:"05/27/2024",author:"Kasun Thushara"}},sidebar:"ProductSidebar",previous:{title:"reTerminal DM CANBUS with Node-RED",permalink:"/reTerminal-DM-Node-Red-canbus"},next:{title:"reTerminal DM with Node Red and BACnet TCP",permalink:"/reterminal_dm_rpi_200_node_red_bacnet_tcp"}},d={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Getting Start",id:"getting-start",level:2},{value:"Hardware",id:"hardware",level:3},{value:"Modbus Support Devices",id:"modbus-support-devices",level:4},{value:"Software Preparation",id:"software-preparation",level:3},{value:"Configure Ethernet settings for Modbus TCP/IP",id:"configure-ethernet-settings-for-modbus-tcpip",level:3},{value:"Install Modbus node",id:"install-modbus-node",level:2},{value:"Identifying Modbus Addresses",id:"identifying-modbus-addresses",level:2},{value:"Configuring the Modbus-Write Node",id:"configuring-the-modbus-write-node",level:2},{value:"Configuring the Modbus-Read Node",id:"configuring-the-modbus-read-node",level:2},{value:"Configuring the Modbus-Response Node",id:"configuring-the-modbus-response-node",level:2},{value:"Tech Support &amp; Product Discussion",id:"tech-support--product-discussion",level:2}],g={toc:l},u="wrapper";function p(e){let{components:t,...n}=e;return(0,o.yg)(u,(0,r.A)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,o.yg)("h2",{id:"introduction"},"Introduction"),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Modbus")," is a widely used communication protocol in industrial environments, known for its simplicity and robustness. ",(0,o.yg)("strong",{parentName:"p"},"Modbus RTU (Remote Terminal Unit)")," is a serial communication protocol that operates over RS-232 or RS-485 physical layers. It uses a compact, binary representation of the data, making it efficient for transmission over long distances and in noisy environments. ",(0,o.yg)("strong",{parentName:"p"},"Modbus TCP"),", on the other hand, extends the protocol to Ethernet networks, encapsulating Modbus frames within TCP/IP packets. This allows for faster communication speeds and the integration of Modbus with modern IT infrastructure. Both versions are favored in industrial settings due to their reliability, ease of implementation, and ability to facilitate communication between a wide variety of devices and systems, such as PLCs, sensors, and SCADA systems."),(0,o.yg)("h2",{id:"getting-start"},"Getting Start"),(0,o.yg)("p",null,"Before you start this project, you may need to prepare your hardware and software in advance as described here."),(0,o.yg)("h3",{id:"hardware"},"Hardware"),(0,o.yg)("div",{class:"table-center"},(0,o.yg)("table",{class:"table-nobg"},(0,o.yg)("tr",{class:"table-trnobg"},(0,o.yg)("th",{class:"table-trnobg"},"reTerminal DM")),(0,o.yg)("tr",{class:"table-trnobg"}),(0,o.yg)("tr",{class:"table-trnobg"},(0,o.yg)("td",{class:"table-trnobg"},(0,o.yg)("div",{style:{textAlign:"center"}},(0,o.yg)("img",{src:"https://files.seeedstudio.com/wiki/reTerminalDM/ML/edgeimpulse/reterminaldm.png",style:{width:300,height:"auto"}})))),(0,o.yg)("tr",{class:"table-trnobg"}),(0,o.yg)("tr",{class:"table-trnobg"},(0,o.yg)("td",{class:"table-trnobg"},(0,o.yg)("div",{class:"get_one_now_container",style:{textAlign:"center"}},(0,o.yg)("a",{class:"get_one_now_item",href:"https://www.seeedstudio.com/reTerminal-DM-p-5616.html"},(0,o.yg)("strong",null,(0,o.yg)("span",null,(0,o.yg)("font",{color:"FFFFFF",size:"4"}," Get One Now \ud83d\uddb1\ufe0f"))))))))),(0,o.yg)("h4",{id:"modbus-support-devices"},"Modbus Support Devices"),(0,o.yg)("p",null,"The reTerminal DM supports Modbus communication with various devices, including ",(0,o.yg)("strong",{parentName:"p"},"PLCs, VFDs, HMIs, energy meters, and BMS")," systems. For this case, the Siemens LOGO PLC will be utilized, which supports  ",(0,o.yg)("strong",{parentName:"p"},"Modbus TCP/IP protocols"),". Connect the reTerminal DM with an Ethernet port and a Modbus TCP-enabled device."),(0,o.yg)("h3",{id:"software-preparation"},"Software Preparation"),(0,o.yg)("p",null,"We have prepared a ",(0,o.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/reTerminal-DM-Getting-Started-with-Node-Red/"},"Getting started Guide on Node-RED"),". It is recommended that you review this guide before proceeding to the wiki."),(0,o.yg)("h3",{id:"configure-ethernet-settings-for-modbus-tcpip"},"Configure Ethernet settings for Modbus TCP/IP"),(0,o.yg)("p",null,"Since your PLC/Device IP domain is different from your wireless settings, you may have to change the IP configuration manually. For that,"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Step 01"),": Run the following command:")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-sh"},"sudo nano /etc/dhcpcd.conf\n")),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Step 02"),": Then configure the Ethernet port settings according to your PLC/Device network domain and set priorities using the ",(0,o.yg)("strong",{parentName:"li"},"metric")," command. The lowest metric has the highest priority.")),(0,o.yg)("center",null,(0,o.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reTerminalDM/nodered/ipconfig.PNG"})),(0,o.yg)("h2",{id:"install-modbus-node"},"Install Modbus node"),(0,o.yg)("p",null,"To install the Modbus node, follow these steps:"),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Step 1.")," Click the Settings button, indicated by a ",(0,o.yg)("strong",{parentName:"p"},"three-dash")," icon, located at the top-right corner, then select ",(0,o.yg)("strong",{parentName:"p"},"Manage palette.")),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Step 2.")," In the palette tab, navigate to the ",(0,o.yg)("strong",{parentName:"p"},"Install tab"),"."),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Step 3.")," Use the node search bar to find the desired ",(0,o.yg)("a",{parentName:"p",href:"https://flows.nodered.org/node/node-red-contrib-modbus"},"Modbus node"),"."),(0,o.yg)("center",null,(0,o.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reTerminalDM/nodered/pallet.PNG"})),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Step 4.")," Click the ",(0,o.yg)("strong",{parentName:"p"},"Install")," button next to the node."),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Step 5.")," If prompted, click the ",(0,o.yg)("strong",{parentName:"p"},"Install")," button from the dropdown warning window to confirm the installation."),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Step 6.")," Wait for the installation process to complete. Once finished, the ",(0,o.yg)("strong",{parentName:"p"},"Install")," button should change to ",(0,o.yg)("strong",{parentName:"p"},"Installed.")),(0,o.yg)("div",{style:{textAlign:"center"}},(0,o.yg)("img",{src:"https://files.seeedstudio.com/wiki/reTerminalDM/nodered/nodered-edgebox1.gif",style:{width:800,height:"auto"}})),(0,o.yg)("h2",{id:"identifying-modbus-addresses"},"Identifying Modbus Addresses"),(0,o.yg)("p",null,"Identifying the correct Modbus addresses is a crucial step. It is recommended to ",(0,o.yg)("strong",{parentName:"p"},"consult the PLC or device manufacturer's datasheet for detailed information on Modbus addresses, including input, output, and holding registers"),"."),(0,o.yg)("div",{style:{textAlign:"center"}},(0,o.yg)("img",{src:"https://files.seeedstudio.com/wiki/reTerminalDM/nodered/modbus.PNG",style:{width:600,height:"auto"}})),(0,o.yg)("p",null,"Based on this information, you can adjust the Modbus address in the tag configuration. For example, if the datasheet lists the output coil Q1 as 8193, you should configure the address as 8192 in Node-RED (",(0,o.yg)("strong",{parentName:"p"},"decrementing by one from the original address"),"). Similarly, if a network input is listed as 1 and it is a coil type, the address should be set to 0 in Node-RED."),(0,o.yg)("h2",{id:"configuring-the-modbus-write-node"},"Configuring the Modbus-Write Node"),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Step 1"),". ",(0,o.yg)("strong",{parentName:"p"},"Drag and drop")," the Modbus-Write node onto the workspace, then ",(0,o.yg)("strong",{parentName:"p"},"double-click")," on the node to open its settings."),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Step 2"),". In the ",(0,o.yg)("strong",{parentName:"p"},"Server")," tab, edit it to add your device by entering the following details:"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Name"),": Server Name"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Type"),": TCP"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Host"),": IP Address of the Modbus server"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Port"),": Port address of the Modbus server (typically 502)"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Unit-Id"),": 255 (Unit-ID is used to identify individual devices within a Modbus network, especially when multiple devices share the same communication line)")),(0,o.yg)("div",{style:{textAlign:"center"}},(0,o.yg)("img",{src:"https://files.seeedstudio.com/wiki/reTerminalDM/nodered/server.PNG",style:{width:600,height:"auto"}})),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Step 3"),". ",(0,o.yg)("strong",{parentName:"p"},"Give your node an appropriate name"),', for example, "Network IP 1". For this demo, you are controlling a network input in the PLC program.'),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Step 4"),". Set the ",(0,o.yg)("strong",{parentName:"p"},"FC option")," to ",(0,o.yg)("strong",{parentName:"p"},"FC 5: Force Single Coil"),"."),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Step 5"),". Set the ",(0,o.yg)("strong",{parentName:"p"},"address to 0")," (as we are addressing input 0)."),(0,o.yg)("div",{style:{textAlign:"center"}},(0,o.yg)("img",{src:"https://files.seeedstudio.com/wiki/reTerminalDM/nodered/networkip1.PNG",style:{width:600,height:"auto"}})),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Step 6"),". Using the inject node, we can inject boolean values. Here, we will use a couple of inject nodes for that purpose."),(0,o.yg)("p",null,"The overall steps can be demonstrated as follows"),(0,o.yg)("div",{style:{textAlign:"center"}},(0,o.yg)("img",{src:"https://files.seeedstudio.com/wiki/reTerminalDM/nodered/modbus-write.gif",style:{width:800,height:"auto"}})),(0,o.yg)("h2",{id:"configuring-the-modbus-read-node"},"Configuring the Modbus-Read Node"),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Step 1"),". ",(0,o.yg)("strong",{parentName:"p"},"Drag and drop")," the Modbus-Read node onto the flow. You can find this node in the Modbus tab of your palette."),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Step 2"),". ",(0,o.yg)("strong",{parentName:"p"},"Double-click")," on the Modbus-Read node to open its settings."),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Step 3"),". ",(0,o.yg)("strong",{parentName:"p"},"Configure the following settings:")),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Name"),': Give it an appropriate name, such as "ReadOutputs".'),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"FC value"),": Change the FC value to FC 5: Read Coil Status."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Address"),": Set the address to 8192 (according to the manufacturer's datasheet)."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Quantity"),": Set the quantity to 4, This case,there are 4 digital outputs."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Poll Rate"),": Change the poll rate to something suitable for your application needs."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Server"),': Set the server to "MyPLC" (configured in the previous example).')),(0,o.yg)("div",{style:{textAlign:"center"}},(0,o.yg)("img",{src:"https://files.seeedstudio.com/wiki/reTerminalDM/nodered/modbusread.PNG",style:{width:600,height:"auto"}})),(0,o.yg)("h2",{id:"configuring-the-modbus-response-node"},"Configuring the Modbus-Response Node"),(0,o.yg)("p",null,"The ",(0,o.yg)("strong",{parentName:"p"},"Modbus-Response node")," is used to display the response of a Modbus Read/Write node."),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Step 1"),". ",(0,o.yg)("strong",{parentName:"p"},"Drag and drop")," the Modbus-Response node onto the flow."),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Step 2"),". Connect with ",(0,o.yg)("strong",{parentName:"p"},"Modbus Read")," Node. The response will display an array of numbers under your Modbus-Response node. These numbers represent the count of each digital output."),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Step 3"),". ",(0,o.yg)("strong",{parentName:"p"},"Drag and Drop Debug Node")," for inspection purpose. Then connect with ",(0,o.yg)("strong",{parentName:"p"},"Modbus Read Node"),". "),(0,o.yg)("p",null,"By following these steps, you can read and display the values of registers/coils from your Modbus TCP device effectively "),(0,o.yg)("p",null,"The overall steps can be demonstrated as follows."),(0,o.yg)("div",{style:{textAlign:"center"}},(0,o.yg)("img",{src:"https://files.seeedstudio.com/wiki/reTerminalDM/nodered/modbus-read.gif",style:{width:800,height:"auto"}})),(0,o.yg)("h2",{id:"tech-support--product-discussion"},"Tech Support & Product Discussion"),(0,o.yg)("p",null,"Thank you for choosing our products! We are here to provide you with different support to ensure that your experience with our products is as smooth as possible. We offer several communication channels to cater to different preferences and needs."),(0,o.yg)("div",{class:"button_tech_support_container"},(0,o.yg)("a",{href:"https://forum.seeedstudio.com/",class:"button_forum"}),(0,o.yg)("a",{href:"https://www.seeedstudio.com/contacts",class:"button_email"})),(0,o.yg)("div",{class:"button_tech_support_container"},(0,o.yg)("a",{href:"https://discord.gg/eWkprNDMU7",class:"button_discord"}),(0,o.yg)("a",{href:"https://github.com/Seeed-Studio/wiki-documents/discussions/69",class:"button_discussion"})))}p.isMDXComponent=!0}}]);