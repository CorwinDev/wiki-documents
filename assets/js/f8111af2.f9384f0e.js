"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[37641],{15680:(e,t,n)=>{n.d(t,{xA:()=>c,yg:()=>g});var o=n(96540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),p=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(n),m=r,g=u["".concat(l,".").concat(m)]||u[m]||d[m]||a;return n?o.createElement(g,i(i({ref:t},c),{},{components:n})):o.createElement(g,i({ref:t},c))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:r,i[1]=s;for(var p=2;p<a;p++)i[p]=n[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},70658:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>p});var o=n(9668),r=(n(96540),n(15680));const a={description:"This wiki provides a tutorial on how to run Zero-Shot Detection on reComputer Jetson.",title:"How to Run Zero-Shot Detection on reComputer",keywords:["reComputer","Zero-Shot Detection"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/run_zero_shot_detection_on_recomputer",last_update:{date:"7/24/2024",author:"ZhuYaoHui"}},i="How to Run Zero-Shot Detection on reComputer with Jetson Platform Services",s={unversionedId:"Edge/NVIDIA_Jetson/Application/Generative_AI/How_to_run_zero_shot_detection_on_reComputer",id:"Edge/NVIDIA_Jetson/Application/Generative_AI/How_to_run_zero_shot_detection_on_reComputer",title:"How to Run Zero-Shot Detection on reComputer",description:"This wiki provides a tutorial on how to run Zero-Shot Detection on reComputer Jetson.",source:"@site/docs/Edge/NVIDIA_Jetson/Application/Generative_AI/How_to_run_zero_shot_detection_on_reComputer.md",sourceDirName:"Edge/NVIDIA_Jetson/Application/Generative_AI",slug:"/run_zero_shot_detection_on_recomputer",permalink:"/run_zero_shot_detection_on_recomputer",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Edge/NVIDIA_Jetson/Application/Generative_AI/How_to_run_zero_shot_detection_on_reComputer.md",tags:[],version:"current",lastUpdatedBy:"ZhuYaoHui",lastUpdatedAt:1721779200,formattedLastUpdatedAt:"Jul 24, 2024",frontMatter:{description:"This wiki provides a tutorial on how to run Zero-Shot Detection on reComputer Jetson.",title:"How to Run Zero-Shot Detection on reComputer",keywords:["reComputer","Zero-Shot Detection"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/run_zero_shot_detection_on_recomputer",last_update:{date:"7/24/2024",author:"ZhuYaoHui"}},sidebar:"ProductSidebar",previous:{title:"RAG with LlamaIndex",permalink:"/Local_RAG_based_on_Jetson_with_LlamaIndex"},next:{title:"How to Run VLM on reComputer",permalink:"/run_vlm_on_recomputer"}},l={},p=[{value:"Introduction",id:"introduction",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Getting Started",id:"getting-started",level:2},{value:"Add the RTSP stream input",id:"add-the-rtsp-stream-input",level:2},{value:"Add Detection Classes",id:"add-detection-classes",level:2},{value:"View RTSP Stream Result",id:"view-rtsp-stream-result",level:2},{value:"Shut Down",id:"shut-down",level:2},{value:"More Details",id:"more-details",level:2},{value:"Tech Support &amp; Product Discussion",id:"tech-support--product-discussion",level:2}],c={toc:p},u="wrapper";function d(e){let{components:t,...n}=e;return(0,r.yg)(u,(0,o.A)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"how-to-run-zero-shot-detection-on-recomputer-with-jetson-platform-services"},"How to Run Zero-Shot Detection on reComputer with Jetson Platform Services"),(0,r.yg)("h2",{id:"introduction"},"Introduction"),(0,r.yg)("p",null,"Generative AI vision transformers such as CLIP have made it possible to build zero shot detection models capable of open vocabulary object detection. Meaning, the model is not bounded by a set of pre-defined classes to detect. The objects to detect are configured at runtime by the user. The Zero Shot Detection AI service, enables quick deployment of generative AI with Jetson Services for open vocabulary detection on video live stream input. The Zero Shot Detection AI service exposes REST API endpoints to control stream input and objects to detect."),(0,r.yg)("p",null,"This wiki provides a tutorial on how to run Zero-Shot Detection on ",(0,r.yg)("a",{parentName:"p",href:"https://www.seeedstudio.com/reComputer-J4012-p-5586.html"},"reComputer J4012"),"."),(0,r.yg)("div",{align:"center"},(0,r.yg)("img",{width:900,src:"https://files.seeedstudio.com/wiki/reComputer/Application/zero_shot_detection/fig1.gif"})),(0,r.yg)("h2",{id:"requirements"},"Requirements"),(0,r.yg)("p",null,"Before proceeding with the setup process, please ensure that your system meets the following prerequisites:"),(0,r.yg)("div",{align:"center"},(0,r.yg)("img",{width:800,src:"https://files.seeedstudio.com/wiki/reComputer/Application/reComputer_J4012.png"})),(0,r.yg)("div",{class:"get_one_now_container",style:{textAlign:"center"}},(0,r.yg)("a",{class:"get_one_now_item",href:"https://files.seeedstudio.com/wiki/reComputer/Application/reComputer_J4012.png"},(0,r.yg)("strong",null,(0,r.yg)("span",null,(0,r.yg)("font",{color:"FFFFFF",size:"4"}," Get One Now \ud83d\uddb1\ufe0f"))))),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"A reComputer J4012 Orin NX 16G running Ubuntu ",(0,r.yg)("inlineCode",{parentName:"li"},"22.04")," or ",(0,r.yg)("inlineCode",{parentName:"li"},"later"),"."),(0,r.yg)("li",{parentName:"ul"},"Driver Version: ",(0,r.yg)("inlineCode",{parentName:"li"},"535.113.01"),", Jetpack ",(0,r.yg)("inlineCode",{parentName:"li"},"6.0")," and CUDA Version: ",(0,r.yg)("inlineCode",{parentName:"li"},"12.2"),"."),(0,r.yg)("li",{parentName:"ul"},"Make sure that JetPack and the related Jetson services packages are installed.",(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"sudo apt-get install nvidia-jetpack\nsudo apt install nvidia-jetson-services\n"))),(0,r.yg)("li",{parentName:"ul"},"IP cameras or local videos can be streamed via RTSP. (We recommend using our provided ",(0,r.yg)("a",{parentName:"li",href:"/getting_started_with_nvstreamer"},"NVStreamer tutorial")," for RTSP streaming.)")),(0,r.yg)("h2",{id:"getting-started"},"Getting Started"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 1"),": Download the application package ",(0,r.yg)("strong",{parentName:"p"},(0,r.yg)("inlineCode",{parentName:"strong"},"zero_shot_detection-1.1.0.tar.gz"))," from NGC to your Jetson using this link: ",(0,r.yg)("a",{parentName:"p",href:"https://catalog.ngc.nvidia.com/orgs/nvidia/teams/jps/resources/reference-workflow-and-resources"},"NGC Reference Workflow and Resources"),". You will need to enter your NGC credentials. On the page, use one of the options available in the ",(0,r.yg)("strong",{parentName:"p"},(0,r.yg)("inlineCode",{parentName:"strong"},"Download"))," menu (top right corner):"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"tar -xvf zero_shot_detection-1.1.0.tar.gz\ncd ~/zero_shot_detection/example_1\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 2"),": Zero-shot detection AI service will use the ",(0,r.yg)("inlineCode",{parentName:"p"},"jetson-ingress")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"jetson-redis")," services. You need to configure the jetson-ingress service to expose the zero-shot detection REST API. Copy the provided default configuration to the corresponding service configuration directory."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"sudo cp config/zero_shot_detection-nginx.conf /opt/nvidia/jetson/services/ingress/config\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 3"),": Run the basic services."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"sudo systemctl start jetson-monitoring\nsudo systemctl start jetson-sys-monitoring\nsudo systemctl start jetson-gpu-monitoring\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 4"),": Verify that all lines in the platform ingress configuration file (used for monitoring services) are uncommented in the following file:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"/opt/nvidia/jetson/services/ingress/config/platform-nginx.conf\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 5"),": Start the API Gateway to access the monitoring dashboard."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"sudo systemctl restart jetson-ingress\nsudo systemctl restart jetson-redis\nsudo systemctl restart jetson-vst\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 6"),": Start the zero-shot detection AI service."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"sudo docker compose up -d\n")),(0,r.yg)("p",null,"To check if all required containers have started, you can run the following command:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"sudo docker ps\n")),(0,r.yg)("div",{align:"center"},(0,r.yg)("img",{width:1e3,src:"https://files.seeedstudio.com/wiki/reComputer/Application/zero_shot_detection/fig2.png"})),(0,r.yg)("h2",{id:"add-the-rtsp-stream-input"},"Add the RTSP stream input"),(0,r.yg)("p",null,"You can first add an RTSP stream for the zero-shot detection model to use with the following curl command. It is recommended to use the ",(0,r.yg)("a",{parentName:"p",href:"/getting_started_with_nvstreamer"},"NVStreamer tutorial")," for streaming."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Step 1"),": Replace ",(0,r.yg)("inlineCode",{parentName:"p"},"0.0.0.0")," with your Jetson IP and the ",(0,r.yg)("inlineCode",{parentName:"p"},"liveStreamUrl")," link with your RTSP link, then enter the following command in the terminal:"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre"},"```bash\ncurl --location 'http://0.0.0.0:5010/api/v1/live-stream' \\\n--header 'Content-Type: application/json' \\\n--data '{\n\"liveStreamUrl\": \"rtsp://0.0.0.0:31554/nvstream/root/store/nvstreamer_videos/car.mp4\"\n}'\n```\n")),(0,r.yg)("p",{parentName:"li"},"Note: Besides the curl command, you can also directly test the REST API through the API documentation page, which is available at ",(0,r.yg)("inlineCode",{parentName:"p"},"http://0.0.0.0:5010/docs")," when the zero-shot detection service is started. ")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Step 2"),": After executing the first step, an ID will be returned. You need to record this ID for use in subsequent steps."),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-bash"},'{"id": "a782e200-eb48-4d17-a1b9-5ac0696217f7"}\n')),(0,r.yg)("p",{parentName:"li"},"  You can also obtain the ID later using the following command:"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"curl --location 'http://0.0.0.0:5010/api/v1/live-stream'\n")),(0,r.yg)("p",{parentName:"li"},"  To delete a stream by its ID, you can use the following command:"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"curl --location --request DELETE 'http://0.0.0.0:5010/api/v1/live-stream/{id}'\n")))),(0,r.yg)("h2",{id:"add-detection-classes"},"Add Detection Classes"),(0,r.yg)("p",null,"The zero shot detection model is capable of updating its detection classes at runtime. This endpoint accepts a list of objects to detect and an associated threshold value. The threshold is the sensitivity of the detection. Higher values will reduce false positives. Lower values will increase false positives. Currently this service only supports 1 stream but in the future this API will allow for multi-stream support."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Step 1"),": Replace ",(0,r.yg)("inlineCode",{parentName:"li"},"0.0.0.0")," with your reComputer IP address, modify ",(0,r.yg)("inlineCode",{parentName:"li"},"objects")," to include the objects you need to detect (up to ten), set ",(0,r.yg)("inlineCode",{parentName:"li"},"thresholds")," for each category, and use the ",(0,r.yg)("inlineCode",{parentName:"li"},"id")," returned in the previous step. After completing the command, enter the following in the terminal:",(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-bash"},'curl -X \'POST\' \\\n\'http://192.168.49.101:5010/api/v1/detection/classes\' \\\n-H \'accept: application/json\' \\\n-H \'Content-Type: application/json\' \\\n-d \'{\n"objects": [\n    "a car", "a people"\n],\n"thresholds": [\n    0.2, 0.04\n],\n"id": "a782e200-eb48-4d17-a1b9-5ac0696217f7"\n}\'\n')))),(0,r.yg)("h2",{id:"view-rtsp-stream-result"},"View RTSP Stream Result"),(0,r.yg)("p",null,"The detection output will be streamed through ",(0,r.yg)("inlineCode",{parentName:"p"},"rtsp://reComputer_ip:5011/out"),". We provide a Python script for visualizing the video stream output, You need to install the opencv-python library in advance and then run the following Python script:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Step 1:")," Install the opencv-python library:",(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"pip install opencv-python\n"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Step 2:")," Run the following Python script:",(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-python"},'import cv2\nrtsp_url = "rtsp://reComputer_ip:5011/out"\ncap = cv2.VideoCapture(rtsp_url)\nif not cap.isOpened():\n    print("Cannot open RTSP stream")\n    exit()\nwhile True:\n    ret, frame = cap.read()\n    if not ret:\n        print("Failed to retrieve frame")\n        break\n    cv2.imshow(\'RTSP Stream\', frame)\n    if cv2.waitKey(1) & 0xFF == ord(\'q\'):\n        break\ncap.release()\ncv2.destroyAllWindows()\n')))),(0,r.yg)("h2",{id:"shut-down"},"Shut Down"),(0,r.yg)("p",null,"To stop the zero-shot detection service, run the following command in the same directory where the ",(0,r.yg)("inlineCode",{parentName:"p"},"compose.yaml")," file is located:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"sudo docker compose down\n")),(0,r.yg)("h2",{id:"more-details"},"More Details"),(0,r.yg)("p",null,"Zero Shot Detection with Jetson Platform Services: ",(0,r.yg)("a",{parentName:"p",href:"https://docs.nvidia.com/jetson/jps/inference-services/zero_shot_detection.html"},"https://docs.nvidia.com/jetson/jps/inference-services/zero_shot_detection.html")),(0,r.yg)("h2",{id:"tech-support--product-discussion"},"Tech Support & Product Discussion"),(0,r.yg)("p",null,"Thank you for choosing our products! We are here to provide you with different support to ensure that your experience with our products is as smooth as possible. We offer several communication channels to cater to different preferences and needs."),(0,r.yg)("div",{class:"button_tech_support_container"},(0,r.yg)("a",{href:"https://forum.seeedstudio.com/",class:"button_forum"}),(0,r.yg)("a",{href:"https://www.seeedstudio.com/contacts",class:"button_email"})),(0,r.yg)("div",{class:"button_tech_support_container"},(0,r.yg)("a",{href:"https://discord.gg/eWkprNDMU7",class:"button_discord"}),(0,r.yg)("a",{href:"https://github.com/Seeed-Studio/wiki-documents/discussions/69",class:"button_discussion"})))}d.isMDXComponent=!0}}]);