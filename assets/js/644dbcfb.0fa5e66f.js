"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[15924],{15680:(e,t,n)=>{n.d(t,{xA:()=>d,yg:()=>c});var i=n(96540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=i.createContext({}),l=function(e){var t=i.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=l(e.components);return i.createElement(p.Provider,{value:t},e.children)},u="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},m=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,p=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=l(n),m=r,c=u["".concat(p,".").concat(m)]||u[m]||g[m]||a;return n?i.createElement(c,o(o({ref:t},d),{},{components:n})):i.createElement(c,o({ref:t},d))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=m;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[u]="string"==typeof e?e:r,o[1]=s;for(var l=2;l<a;l++)o[l]=n[l];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}m.displayName="MDXCreateElement"},28020:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>g,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var i=n(9668),r=(n(96540),n(15680));const a={description:"This article introduces how to use the `Modbus Connector` of `FIN Framwork`.",title:"reComputer R1000 with FIN to use modbus TCP/RTU",keywords:["Edge Controller","reComputer R1000","FIN","ModbusTCP/RTU"],image:"https://files.seeedstudio.com/wiki/reComputer-R1000/recomputer_r_images/01.png",slug:"/reComputer_r1000_fin_modbus_tcp_and_rtu",last_update:{date:"07/15/2024",author:"ShuishengPeng"}},o=void 0,s={unversionedId:"Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/Fin/recomputer_r1000_with_fin_use_modbus",id:"Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/Fin/recomputer_r1000_with_fin_use_modbus",title:"reComputer R1000 with FIN to use modbus TCP/RTU",description:"This article introduces how to use the `Modbus Connector` of `FIN Framwork`.",source:"@site/docs/Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/Fin/recomputer_r1000_with_fin_use_modbus.md",sourceDirName:"Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/Fin",slug:"/reComputer_r1000_fin_modbus_tcp_and_rtu",permalink:"/reComputer_r1000_fin_modbus_tcp_and_rtu",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/Fin/recomputer_r1000_with_fin_use_modbus.md",tags:[],version:"current",lastUpdatedBy:"ShuishengPeng",lastUpdatedAt:1721001600,formattedLastUpdatedAt:"Jul 15, 2024",frontMatter:{description:"This article introduces how to use the `Modbus Connector` of `FIN Framwork`.",title:"reComputer R1000 with FIN to use modbus TCP/RTU",keywords:["Edge Controller","reComputer R1000","FIN","ModbusTCP/RTU"],image:"https://files.seeedstudio.com/wiki/reComputer-R1000/recomputer_r_images/01.png",slug:"/reComputer_r1000_fin_modbus_tcp_and_rtu",last_update:{date:"07/15/2024",author:"ShuishengPeng"}},sidebar:"ProductSidebar",previous:{title:"reComputer R1000 install FIN",permalink:"/reComputer_r1000_install_fin"},next:{title:"reComputer R1000 with FIN Logic Builder",permalink:"/reComputer_r1000_fin_logic_builder"}},p={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Getting Start",id:"getting-start",level:2},{value:"Hardware Preparation",id:"hardware-preparation",level:3},{value:"Software Preparation",id:"software-preparation",level:3},{value:"Hardware Configuration",id:"hardware-configuration",level:3},{value:"Create New Project",id:"create-new-project",level:3},{value:"Configure <code>Modbus Connector</code> for Modbus TCP",id:"configure-modbus-connector-for-modbus-tcp",level:3},{value:"Configure <code>Modbus Connector</code> for Modbus RTU",id:"configure-modbus-connector-for-modbus-rtu",level:3},{value:"Configure serial port",id:"configure-serial-port",level:4},{value:"Configure Modbus RTU",id:"configure-modbus-rtu",level:4},{value:"Add data points to <code>Equip Tree</code>",id:"add-data-points-to-equip-tree",level:3},{value:"Tech Support &amp; Product Discussion",id:"tech-support--product-discussion",level:2}],d={toc:l},u="wrapper";function g(e){let{components:t,...n}=e;return(0,r.yg)(u,(0,i.A)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h2",{id:"introduction"},"Introduction"),(0,r.yg)("p",null,"FIN Framework (FIN) is a software framework with application suites that can integrate, control, manage, analyze, visualize and connect. Its capabilities can be integrated by OEMs into a range of products and services."),(0,r.yg)("p",null,"This article introduces how to use the ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus Connector")," of ",(0,r.yg)("inlineCode",{parentName:"p"},"FIN Framwork"),", the use of Modbus TCP/RTU in FIN Framwork was explained in detail. which mainly includes three aspects: creating a ",(0,r.yg)("inlineCode",{parentName:"p"},"FIN Framwork")," project, configure ",(0,r.yg)("inlineCode",{parentName:"p"},"serial port number"),", configuring the ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus Connector"),", and adding data points to ",(0,r.yg)("inlineCode",{parentName:"p"},"Equip"),"."),(0,r.yg)("h2",{id:"getting-start"},"Getting Start"),(0,r.yg)("p",null,"Before you start this project, you may need to prepare your hardware and software in advance as described here."),(0,r.yg)("h3",{id:"hardware-preparation"},"Hardware Preparation"),(0,r.yg)("div",{class:"table-center"},(0,r.yg)("table",{class:"table-nobg"},(0,r.yg)("tr",{class:"table-trnobg"},(0,r.yg)("th",{class:"table-trnobg"},"reComputer R1000")),(0,r.yg)("tr",{class:"table-trnobg"}),(0,r.yg)("tr",{class:"table-trnobg"},(0,r.yg)("td",{class:"table-trnobg"},(0,r.yg)("div",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/recomputer_r_images/01.png",style:{width:300,height:"auto"}})))),(0,r.yg)("tr",{class:"table-trnobg"}),(0,r.yg)("tr",{class:"table-trnobg"},(0,r.yg)("td",{class:"table-trnobg"},(0,r.yg)("div",{class:"get_one_now_container",style:{textAlign:"center"}},(0,r.yg)("a",{class:"get_one_now_item",href:"https://www.seeedstudio.com/reComputer-R1025-10-p-5895.html"},(0,r.yg)("strong",null,(0,r.yg)("span",null,(0,r.yg)("font",{color:"FFFFFF",size:"4"}," Get One Now \ud83d\uddb1\ufe0f"))))))))),(0,r.yg)("h3",{id:"software-preparation"},"Software Preparation"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Regarding how to install FIN Framwork, you can refer to this ",(0,r.yg)("a",{parentName:"li",href:"https://wiki.seeedstudio.com/reComputer_r1000_install_fin/"},"wiki"),"."),(0,r.yg)("li",{parentName:"ul"},"Regarding how to use the modbus function of reComputer R1000, you can refer to this ",(0,r.yg)("a",{parentName:"li",href:"https://wiki.seeedstudio.com/reComputer_r1000_use_rs485_modbus_rtu/"},"wiki"),"."),(0,r.yg)("li",{parentName:"ul"},"Using ",(0,r.yg)("a",{parentName:"li",href:"https://modbusmechanic.scifidryer.com/"},"modbusmechanic")," on W10 PC.You can also use other modbus testing tools.")),(0,r.yg)("h3",{id:"hardware-configuration"},"Hardware Configuration"),(0,r.yg)("p",null,"For ModbusTCP, we use Ethernet cables to connect the W10 PC and reComputer R1000 to a switch to ensure that they are on the same network segment."),(0,r.yg)("div",{align:"center"},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/fuxa/r1000_connection.png",alt:"pir",width:"500",height:"auto"})),(0,r.yg)("p",null,"For ModbustRTU, we used an rs485 to USB module to connect the reComuputer R1000 with the W10 pc."),(0,r.yg)("div",{align:"center"},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/RS485_fix/hardwareconnection.png",alt:"pir",width:"700",height:"auto"})),(0,r.yg)("h3",{id:"create-new-project"},"Create New Project"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 1"),": Click the ",(0,r.yg)("inlineCode",{parentName:"p"},"Create")," button in the lower left corner of the homepage, and a new pop-up window will appear. The pop-up window mainly has three attributes that need to be filled in:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"NAME: the name of the new project"),(0,r.yg)("li",{parentName:"ul"},"DISPLAY NAME: displayed project name"),(0,r.yg)("li",{parentName:"ul"},"DESCRIPTION: description of the project")),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/fin/modbus_tcp_1.gif"})),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 2"),": Open the project, enter ",(0,r.yg)("inlineCode",{parentName:"p"},"DB Builder"),", click ",(0,r.yg)("inlineCode",{parentName:"p"},"Connectors"),", you can see that there is no ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus")," option at this time, we need to open the ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus Connector")," of ",(0,r.yg)("inlineCode",{parentName:"p"},"FIN Framwork"),", then ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus")," option will appear here."),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/fin/modbus_tcp_2.gif"})),(0,r.yg)("h3",{id:"configure-modbus-connector-for-modbus-tcp"},"Configure ",(0,r.yg)("inlineCode",{parentName:"h3"},"Modbus Connector")," for Modbus TCP"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 1"),": Open ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus Connector"),". Click ",(0,r.yg)("inlineCode",{parentName:"p"},"Settrings => Ext")," and find ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus"),". At this time, ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus")," is marked in red. Click ",(0,r.yg)("inlineCode",{parentName:"p"},"Enable")," and you can see that the ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus")," mark turns green, indicating that the ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus Connector")," has been successfully opened. Enter ",(0,r.yg)("inlineCode",{parentName:"p"},"DB Builder")," again and you can see that there is already a ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus")," option."),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/fin/modbus_tcp_3.gif"})),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 2"),": Add a new Modbus connection. Click ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus => Add"),", the new pop-up window mainly has the following parameters to fill in:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Dis: the name of the connector")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"ModbusSlave: this would be the slave of the modbus device being connected (default is 1)")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Existing Register Map: If the user already configured a Modbus connector, they would see available registers here to choose from or create a new one with the next property ModbusRegMapUri.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},'ModbusRegMapUri: this is where the user would specify the name of the register map to link with this connector. Replace "xxx" with whatever the name of the register map is.')),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Uri: this is where the uri of the modbus connector would be specified.The format of URI is as shown in the table:"),(0,r.yg)("div",{class:"table-center"},(0,r.yg)("table",{parentName:"li"},(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Protocol"),(0,r.yg)("th",{parentName:"tr",align:null},"URI setup"),(0,r.yg)("th",{parentName:"tr",align:null},"Example"),(0,r.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"TCP/IP"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"modbus-tcp://host:port/")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"modbus-tcp://10.0.0.17/")),(0,r.yg)("td",{parentName:"tr",align:null},"Default port is 502, can be omitted if standard")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"RTU over TCP/IP"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"modbus-rtutcp://host:port/")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"modbus-rtutcp://192.168.1.120:9001/")),(0,r.yg)("td",{parentName:"tr",align:null},"Default port is 502, can be omitted if standard")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"RTU over RS-485"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"modbus-rtu://<port>-<baud>-<dataBits>-<parity>")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"modbus-rtu://serial0-9600-8n1-none")),(0,r.yg)("td",{parentName:"tr",align:null}))))))),(0,r.yg)("p",null,'In our example, we specified "r1000_demo" as our register map. Then added our IP to the device in the Uri.'),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/fin/modbus_tcp_4.gif"})),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 3"),": Add a new ",(0,r.yg)("inlineCode",{parentName:"p"},"Register Maps"),". Click ",(0,r.yg)("inlineCode",{parentName:"p"},"Register Maps => Add"),", enter ",(0,r.yg)("inlineCode",{parentName:"p"},"Name"),", which needs to be consistent with the name of ",(0,r.yg)("inlineCode",{parentName:"p"},"ModbusRegMapUri")," in the second step, and finally click ",(0,r.yg)("inlineCode",{parentName:"p"},"ADD"),"."),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/fin/modbus_tcp_5.gif"})),(0,r.yg)("p",null,"The system will create a new ",(0,r.yg)("inlineCode",{parentName:"p"},"r1000_demo.csv")," file in the ",(0,r.yg)("inlineCode",{parentName:"p"},"opt/finFramework_5.1.6.55/var/proj/recomputer_R1000_demo/data/modbus/")," directory. This file describes the Modbus register information we need to read."),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/fin/modbus_tcp_register_map_addr.png"})),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 4"),": Add the register information to be read. ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus Connector")," exists as a Modbus master. It will read the registers of the slave. We need to configure the register information to be read. Click ",(0,r.yg)("inlineCode",{parentName:"p"},"r1000_demo"),", you can see that there is a description of ",(0,r.yg)("inlineCode",{parentName:"p"},"ping")," by default, this is a must. We continue to add new register information and click ",(0,r.yg)("inlineCode",{parentName:"p"},"Register Maps => r1000_demo => Add"),". The new pop-up window mainly has the following parameters to fill in:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"name(required): name of register."),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"It must be unique")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"It must start with a lower case letter a-z")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Only a-z, A-Z, 0-9 and underscores are allowed. No spaces or other special characters.")))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"addr(required): this would be the address of the register that follows the modbus convention."),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"0xxxx - Coil (00001-065536)"),(0,r.yg)("li",{parentName:"ul"},"1xxxx - Discrete Input (10001-165536)"),(0,r.yg)("li",{parentName:"ul"},"3xxxx - Input Register (30001-365536)"),(0,r.yg)("li",{parentName:"ul"},"4xxxx - Holding Register (40001-465536)"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"data(required): this defines the data type of the register."),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Types:",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"bit - Bool"),(0,r.yg)("li",{parentName:"ul"},"u1 - Unsigned 8-bit Int"),(0,r.yg)("li",{parentName:"ul"},"u2 - Unsigned 16-bit Int"),(0,r.yg)("li",{parentName:"ul"},"u4 - Unsigned 32-bit Int"),(0,r.yg)("li",{parentName:"ul"},"s1 - Signed 8-bit Int"),(0,r.yg)("li",{parentName:"ul"},"s2 - Signed 16-bit Int"),(0,r.yg)("li",{parentName:"ul"},"s4 - Signed 32-bit Int"),(0,r.yg)("li",{parentName:"ul"},"s8 - Signed 64-bit Int"),(0,r.yg)("li",{parentName:"ul"},"f4 - 32-bit Float"),(0,r.yg)("li",{parentName:"ul"},"f8 - 64-bit Float"))))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"rw(required):  this would determine the read/write permissions"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"rw - Register may be read and written"),(0,r.yg)("li",{parentName:"ul"},"r - Register is read-only"),(0,r.yg)("li",{parentName:"ul"},"w - Register is write-only"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"scale(optional): this allows the user to apply a scale factor to the registers. The format is ","[operator][number]"," where the factor is a numeric constant."),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Examples:",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"add: +1.5"),(0,r.yg)("li",{parentName:"ul"},"minus: -0.25"),(0,r.yg)("li",{parentName:"ul"},"mult: *10"),(0,r.yg)("li",{parentName:"ul"},"div: /1000"))))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"dis(optional): this is an optional tag that the user can specify a pretty display name for the register.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"unit(optional): this would define the unit to use for the register.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"tags(optional): this would be the tags to apply to the point when learned into the database.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"folderPath(optional): if the user wants to organize the points, they can do so by applying a folderPath."))),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/fin/modbus_tcp_6.gif"})),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 5"),": Communication test. After adding the description information of the register, communication can be carried out. Here we use ",(0,r.yg)("inlineCode",{parentName:"p"},"ModbusMechanic")," as the Modbus slave. Click ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus => Ping")," and you can see that ",(0,r.yg)("inlineCode",{parentName:"p"},"Status")," changes to ",(0,r.yg)("inlineCode",{parentName:"p"},"OK"),", indicating that the communication is normal."),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/fin/modbus_tcp_7.gif"})),(0,r.yg)("h3",{id:"configure-modbus-connector-for-modbus-rtu"},"Configure ",(0,r.yg)("inlineCode",{parentName:"h3"},"Modbus Connector")," for Modbus RTU"),(0,r.yg)("h4",{id:"configure-serial-port"},"Configure serial port"),(0,r.yg)("p",null,"The script that needs to be executed is as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-shell"},"## Turn off FIN service\nsudo systemctl stop fin\n## After downloading the config file, place it in /opt/finFramework_5.1.6.55/etc/finStackSerial/\nsudo cp ~/config.props  /opt/finFramework_5.1.6.55/etc/finStackSerial/\n## Modify the config.props file to: serialPorts=/dev/ttyAMA30, /dev/ttyAMA31, /dev/ttyAMA32\nsudo nano /opt/finFramework_5.1.6.55/etc/finStackSerial/config.props\n## Restart the FIN service, wait for a while and then use a browser to open FIN\nsudo systemctl restart fin\n\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 1"),": Turn off FIN service, then download ",(0,r.yg)("a",{parentName:"p",href:"https://drive.google.com/file/d/1j1aGGSsGPjGCYfUGcXTqL2XGP2EuqFw2/view?usp=share_link"},"config file")," and save it to ",(0,r.yg)("inlineCode",{parentName:"p"},"/opt/finFramework_5.1.6 .55/etc/finStackSerial/")," directory"),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/fin/RTU_1.gif"})),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 2"),": Modify config.props to:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-shell"},"serialPorts=/dev/ttyAMA30, /dev/ttyAMA31, /dev/ttyAMA32\n")),(0,r.yg)("p",null,"After the modification is completed, restart the FIN service"),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/fin/RTU_2.gif"})),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 3"),"\uff1aClick on ",(0,r.yg)("inlineCode",{parentName:"p"},"Folio => launch"),",and insert the following query:",(0,r.yg)("inlineCode",{parentName:"p"},"serialPorts()"),", The result will show which name has to be used for your specific port.The port is not the name of the physical port, but there is a match between the physical ports of the device and the name of the port to be used like ",(0,r.yg)("inlineCode",{parentName:"p"},"serial0"),", ",(0,r.yg)("inlineCode",{parentName:"p"},"serial1")," ..."),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/fin/RTU_3.gif"})),(0,r.yg)("h4",{id:"configure-modbus-rtu"},"Configure Modbus RTU"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 1"),": Open ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus Connector"),". Click ",(0,r.yg)("inlineCode",{parentName:"p"},"Settrings => Ext")," and find ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus"),". At this time, ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus")," is marked in red. Click ",(0,r.yg)("inlineCode",{parentName:"p"},"Enable")," and you can see that the ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus")," mark turns green, indicating that the ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus Connector")," has been successfully opened. Enter ",(0,r.yg)("inlineCode",{parentName:"p"},"DB Builder")," again and you can see that there is already a ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus")," option."),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/fin/modbus_tcp_3.gif"})),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 2"),": Add a new Modbus connection. Click ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus => Add"),'.In our example, we specified "r1000_demo_rtu" as our register map. Then added our serial port to the device in the Uri.'),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/fin/RTU_4.gif"})),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 3"),": Add a new ",(0,r.yg)("inlineCode",{parentName:"p"},"Register Maps"),". Click ",(0,r.yg)("inlineCode",{parentName:"p"},"Register Maps => Add"),", enter ",(0,r.yg)("inlineCode",{parentName:"p"},"Name"),", which needs to be consistent with the name of ",(0,r.yg)("inlineCode",{parentName:"p"},"ModbusRegMapUri")," in the second step, and finally click ",(0,r.yg)("inlineCode",{parentName:"p"},"ADD"),"."),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/fin/RTU_5.gif"})),(0,r.yg)("p",null,"The system will create a new ",(0,r.yg)("inlineCode",{parentName:"p"},"r1000_demo_rtu.csv")," file in the ",(0,r.yg)("inlineCode",{parentName:"p"},"opt/finFramework_5.1.6.55/var/proj/recomputer_R1000_demo/data/modbus/")," directory. This file describes the Modbus register information we need to read."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 4"),": Add the register information to be read. ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus Connector")," exists as a Modbus master. It will read the registers of the slave. We need to configure the register information to be read. Click ",(0,r.yg)("inlineCode",{parentName:"p"},"r1000_demo_rtu"),", you can see that there is a description of ",(0,r.yg)("inlineCode",{parentName:"p"},"ping")," by default, this is a must. We continue to add new register information and click ",(0,r.yg)("inlineCode",{parentName:"p"},"Register Maps => r1000_demo_rtu => Add"),"."),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/fin/RTU_6.gif"})),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 5"),": Communication test. After adding the description information of the register, communication can be carried out. Here we use ",(0,r.yg)("inlineCode",{parentName:"p"},"ModbusMechanic")," as the Modbus slave. Click ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus => Ping")," and you can see that ",(0,r.yg)("inlineCode",{parentName:"p"},"Status")," changes to ",(0,r.yg)("inlineCode",{parentName:"p"},"OK"),", indicating that the communication is normal."),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/fin/RTU_7.gif"})),(0,r.yg)("h3",{id:"add-data-points-to-equip-tree"},"Add data points to ",(0,r.yg)("inlineCode",{parentName:"h3"},"Equip Tree")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 1"),": add ",(0,r.yg)("inlineCode",{parentName:"p"},"Equip"),". Click ",(0,r.yg)("inlineCode",{parentName:"p"},"Equip Tree => + => Add site"),", enter ",(0,r.yg)("inlineCode",{parentName:"p"},"Name"),", here I enter ",(0,r.yg)("inlineCode",{parentName:"p"},"Tower"),", it can add a ",(0,r.yg)("inlineCode",{parentName:"p"},"site")," named ",(0,r.yg)("inlineCode",{parentName:"p"},"Tower"),"; then click ",(0,r.yg)("inlineCode",{parentName:"p"},"Equip Tree => Tower => + => Add Floor"),", enter ",(0,r.yg)("inlineCode",{parentName:"p"},"Name"),", here I enter ",(0,r.yg)("inlineCode",{parentName:"p"},"Floor1"),", it can add a ",(0,r.yg)("inlineCode",{parentName:"p"},"Floor")," named ",(0,r.yg)("inlineCode",{parentName:"p"},"Floor1"),"; click ",(0,r.yg)("inlineCode",{parentName:"p"},"Equip Tree again => Tower => Floor1 => + => Add Equip"),", enter ",(0,r.yg)("inlineCode",{parentName:"p"},"Name"),", here I enter ",(0,r.yg)("inlineCode",{parentName:"p"},"ModbusEquip")," to add a new ",(0,r.yg)("inlineCode",{parentName:"p"},"Equip"),"."),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/fin/modbus_tcp_8.gif"})),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 2"),": Click ",(0,r.yg)("inlineCode",{parentName:"p"},"->")," on the right side of ",(0,r.yg)("inlineCode",{parentName:"p"},"ModbusEquip")," to make the system path under ",(0,r.yg)("inlineCode",{parentName:"p"},"Tower/Floor1/ModbusEquip"),"."),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/fin/modbustcp_modbusequip_path.png"})),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 3"),": Add data points. Click ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus => Modbus Conn"),", click ",(0,r.yg)("inlineCode",{parentName:"p"},"Discover Points")," in the new window, the register information points we set will appear, select a register to be read, and click ",(0,r.yg)("inlineCode",{parentName:"p"},"Add"),"."),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/fin/modbus_tcp_9.gif"})),(0,r.yg)("h2",{id:"tech-support--product-discussion"},"Tech Support & Product Discussion"),(0,r.yg)("p",null,"Thank you for choosing our products! We are here to provide you with different support to ensure that your experience with our products is as smooth as possible. We offer several communication channels to cater to different preferences and needs."),(0,r.yg)("div",{class:"button_tech_support_container"},(0,r.yg)("a",{href:"https://forum.seeedstudio.com/",class:"button_forum"}),(0,r.yg)("a",{href:"https://www.seeedstudio.com/contacts",class:"button_email"})),(0,r.yg)("div",{class:"button_tech_support_container"},(0,r.yg)("a",{href:"https://discord.gg/eWkprNDMU7",class:"button_discord"}),(0,r.yg)("a",{href:"https://github.com/Seeed-Studio/wiki-documents/discussions/69",class:"button_discussion"})))}g.isMDXComponent=!0}}]);